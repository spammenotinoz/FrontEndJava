import{d as V,$,r as s,w as i,E as K,Q as b,R,X as l,V as t,c as r,Y as m,H as p,S as a,U as z,n as j}from"./vue-ed5b065f.js";import{c as A}from"./system-7eadfc88.js";import{$ as D,U as Q,Q as H,w as X,f as Y,a0 as q,j as F,a1 as G,o as J}from"./naive_ui-22e043f0.js";import"./index-0ad4123e.js";const M={class:"mb-4 flex flex-col"},O={class:"flex flex-row mt-3 justify-between"},P={class:"flex flex-wrap flex-row sm:space-x-3"},W={class:"option-item"},Z={class:"option-item"},ee={class:"option-item"},ne={class:"flex items-center space-x-2"},ue=V({__name:"log_viewer",setup(le){const{t:u}=$(),_=s(5),c=s("server"),U=s(),g=s(!0),d=s(100),w=s([]),f=s(["status","logs"]),k=s();i(()=>c.value,()=>{o()}),i(()=>d.value,()=>{o()});const B=()=>{j(()=>{var v;(v=k.value)==null||v.scrollTo({position:"bottom",slient:!1})})},o=()=>{c.value==="server"&&A({max_lines:d.value,exclude_keywords:f.value}).then(v=>{U.value=v.data}),g.value&&B()};o();let y=setInterval(()=>{o()},_.value*1e3);return K(()=>{clearInterval(y)}),i(()=>_.value,()=>{clearInterval(y),y=setInterval(()=>{o()},_.value*1e3)}),i(()=>f.value,()=>{o()}),i(()=>w.value,()=>{o()}),(v,e)=>{const C=D,L=Q,x=H,S=X,T=Y,I=q,h=F,E=G,N=J;return b(),R("div",M,[l(L,{value:c.value,"onUpdate:value":e[0]||(e[0]=n=>c.value=n),type:"segment"},{default:t(()=>[l(C,{name:"server"},{default:t(()=>[r(m(p(u)("commons.serverLogs")),1)]),_:1})]),_:1},8,["value"]),a("div",O,[a("div",P,[a("div",W,[l(x,null,{default:t(()=>[r(m(p(u)("commons.maxLineCount")),1)]),_:1}),l(S,{value:d.value,"onUpdate:value":e[1]||(e[1]=n=>d.value=n),size:"small",class:"w-27",min:100,max:2e3,step:100},null,8,["value"])]),a("div",Z,[l(x,null,{default:t(()=>[r(m(p(u)("commons.updateInterval")),1)]),_:1}),l(T,{value:_.value,"onUpdate:value":e[2]||(e[2]=n=>_.value=n),size:"small",class:"w-20",options:[{label:"3s",value:3},{label:"5s",value:5},{label:"10s",value:10}]},null,8,["value"])]),a("div",ee,[l(x,null,{default:t(()=>[r(m(p(u)("commons.excludeKeywords")),1)]),_:1}),c.value==="proxy"?(b(),z(I,{key:0,value:w.value,"onUpdate:value":e[3]||(e[3]=n=>w.value=n),size:"small"},null,8,["value"])):(b(),z(I,{key:1,value:f.value,"onUpdate:value":e[4]||(e[4]=n=>f.value=n),size:"small"},null,8,["value"]))])]),a("div",ne,[l(x,null,{default:t(()=>[r(m(p(u)("commons.autoScrolling")),1)]),_:1}),l(h,{value:g.value,"onUpdate:value":e[5]||(e[5]=n=>g.value=n),size:"small"},null,8,["value"])])]),l(N,{class:"mt-3 flex-grow h-full","content-style":{height:"100%"}},{default:t(()=>[l(E,{ref_key:"logInstRef",ref:k,"font-size":10,rows:40,lines:U.value},null,8,["lines"])]),_:1})])}}});export{ue as default};
//# sourceMappingURL=log_viewer-3d4b664a.js.map
